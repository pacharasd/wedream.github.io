<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8" />
    <title>Pachara</title>
    <link rel="stylesheet" href="style.css" />
    <style>
        /* ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡∏∞‡∏•‡∏ö */
        .edit-btn,
        .delete-btn {
            margin-left: 8px;
            cursor: pointer;
            background: transparent;
            border: none;
            font-size: 16px;
        }

        .delete-btn {
            color: #e53935;
        }

        .delete-btn:hover {
            color: #b71c1c;
        }

        .edit-btn:hover {
            color: #4a148c;
        }
    </style>
</head>

<body>
    <nav class="menu-bar">
        <ul>
            <li><a href="index.html">Pachara üêª</a></li>
            <li><a href="chutamat.html">Chutamat üê∞</a></li>
        </ul>
    </nav>

    <div class="dream-box">
        <h1>üêª ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏ö‡∏™‡∏ó‡πå </h1>
        <form id="dream-form">
            <!-- ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
        </form>

        <div class="add-dream">
            <input type="text" id="new-dream" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì..." />
            <button type="button" onclick="addDream()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô</button>
        </div>
    </div>

    <script>
        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏∑‡πà‡∏≠ key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö localStorage ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤
        const storageKey = 'dreamsDataPachara';

        window.onload = function () {
            loadDreams();

            // ‡∏ó‡∏≥ active menu
            const links = document.querySelectorAll('.menu-bar ul li a');
            const currentPath = window.location.pathname.split('/').pop() || 'index.html';

            links.forEach(link => {
                const href = link.getAttribute('href');
                if (href === currentPath) {
                    link.classList.add('active');
                }
            });
        };

        function addDream() {
            const input = document.getElementById("new-dream");
            const dreamText = input.value.trim();
            if (dreamText === "") return;

            addDreamToDOM(dreamText, false);

            input.value = "";
            saveDreams();
        }

        function addDreamToDOM(text, checked) {
            const form = document.getElementById("dream-form");

            const label = document.createElement("label");
            label.classList.add("editable-dream");

            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.name = "dream";
            checkbox.value = text;
            checkbox.checked = checked;

            checkbox.addEventListener("change", saveDreams);

            const span = document.createElement("span");
            span.textContent = " " + text;

            const editBtn = document.createElement("button");
            editBtn.type = "button";
            editBtn.textContent = "‚úèÔ∏è";
            editBtn.classList.add("edit-btn");
            editBtn.onclick = function () {
                const newText = prompt("‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô:", span.textContent.trim());
                if (newText !== null && newText.trim() !== "") {
                    span.textContent = " " + newText.trim();
                    checkbox.value = newText.trim();
                    saveDreams();
                }
            };

            const deleteBtn = document.createElement("button");
            deleteBtn.type = "button";
            deleteBtn.textContent = "‚ùå";
            deleteBtn.classList.add("delete-btn");
            deleteBtn.onclick = function () {
                if (confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
                    label.remove();
                    saveDreams();
                }
            };

            label.appendChild(checkbox);
            label.appendChild(span);
            label.appendChild(editBtn);
            label.appendChild(deleteBtn);
            form.appendChild(label);
        }

        function saveDreams() {
            const dreams = [];
            const labels = document.querySelectorAll("#dream-form label.editable-dream");
            labels.forEach(label => {
                const checkbox = label.querySelector("input[type=checkbox]");
                const span = label.querySelector("span");
                dreams.push({
                    text: span.textContent.trim(),
                    checked: checkbox.checked,
                });
            });
            localStorage.setItem(storageKey, JSON.stringify(dreams));
        }

        function loadDreams() {
            const dreamsData = localStorage.getItem(storageKey);
            if (!dreamsData) return;

            const dreams = JSON.parse(dreamsData);
            dreams.forEach(d => {
                addDreamToDOM(d.text, d.checked);
            });
        }
    </script>
</body>

</html>
